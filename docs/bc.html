<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Boundary conditions · PeriDyn</title><meta name="title" content="Boundary conditions · PeriDyn"/><meta property="og:title" content="Boundary conditions · PeriDyn"/><meta property="twitter:title" content="Boundary conditions · PeriDyn"/><meta name="description" content="Documentation for PeriDyn."/><meta property="og:description" content="Documentation for PeriDyn."/><meta property="twitter:description" content="Documentation for PeriDyn."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/font.css" rel="stylesheet" type="text/css"/><link href="assets/color.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="PeriDyn logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">PeriDyn</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="examples.html">Quick start</a></li><li><a class="tocitem" href="toc.html">Table of contents</a></li><li><a class="tocitem" href="materialgeometry.html">Material geometry</a></li><li><a class="tocitem" href="mmodels.html">Material models</a></li><li><a class="tocitem" href="cmodels.html">Contact models</a></li><li class="is-active"><a class="tocitem" href="bc.html">Boundary conditions</a><ul class="internal"><li><a class="tocitem" href="#Predefined-boundary-conditions"><span>Predefined boundary conditions</span></a></li><li><a class="tocitem" href="#Custom-boundary-conditions"><span>Custom boundary conditions</span></a></li></ul></li><li><a class="tocitem" href="solvers.html">Solvers</a></li><li><a class="tocitem" href="io.html">I/O</a></li><li><a class="tocitem" href="list.html">Index</a></li><li><a class="tocitem" href="autodocs.html">Autodocs</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="bc.html">Boundary conditions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="bc.html">Boundary conditions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ravinderbhattoo/PeriDyn" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ravinderbhattoo/PeriDyn/blob/master/documenter/src/bc.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Boundary-conditions"><a class="docs-heading-anchor" href="#Boundary-conditions">Boundary conditions</a><a id="Boundary-conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Boundary-conditions" title="Permalink"></a></h1><p>Boundary conditions in PeriDyn are used to specify the behavior of material particles at the selected material location in a simulation. The page lists different types of boundary conditions that are predefined in the package.</p><p><strong>List of predefined boundary conditions:</strong></p><ul><li><a href="autodocs.html#PeriDyn.FixBC"><code>FixBC</code></a> (Fix Boundary Condition)</li><li><a href="autodocs.html#PeriDyn.ToFroBC"><code>ToFroBC</code></a> (To and Fro Boundary Condition)</li><li><a href="autodocs.html#PeriDyn.MoveBC-Tuple{Any, Any}"><code>MoveBC</code></a> (Move Boundary Condition)</li><li><a href="autodocs.html#PeriDyn.DeltaScaleBC"><code>DeltaScaleBC</code></a> (Delta Scale Boundary Condition)</li><li><a href="autodocs.html#PeriDyn.ScaleFixWaitBC"><code>ScaleFixWaitBC</code></a> (Scale Fix Wait Boundary Condition)</li></ul><h2 id="Predefined-boundary-conditions"><a class="docs-heading-anchor" href="#Predefined-boundary-conditions">Predefined boundary conditions</a><a id="Predefined-boundary-conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Predefined-boundary-conditions" title="Permalink"></a></h2><ul><li><p><a href="autodocs.html#PeriDyn.FixBC"><code>FixBC</code></a> (Fix Boundary Condition): This boundary condition fixes the position and velocity of particles at specific boundary regions. It is typically used to simulate rigid walls or immovable boundaries. For example, it can be used to fix the position of particles at the start of the simulation to represent a fixed boundary.</p></li><li><p><a href="autodocs.html#PeriDyn.ToFroBC"><code>ToFroBC</code></a> (To and Fro Boundary Condition): This boundary condition imparts a prescribed motion to particles at specific boundary regions. It allows particles to move back and forth within a specified direction and frequency. It is useful for simulating boundaries with oscillatory motion. For instance, it can be used to simulate a boundary that moves back and forth periodically.</p></li><li><p><a href="autodocs.html#PeriDyn.MoveBC-Tuple{Any, Any}"><code>MoveBC</code></a> (Move Boundary Condition): This boundary condition imparts a constant velocity to particles at specific boundary regions. It is commonly used to simulate boundaries subjected to external forces or displacements. For example, it can be applied to particles at the boundary of a bar to represent a constant velocity movement.</p></li><li><p><a href="autodocs.html#PeriDyn.DeltaScaleBC"><code>DeltaScaleBC</code></a> (Delta Scale Boundary Condition): This boundary condition applies a scaling factor to particles at specific boundary regions. It can be used to simulate deformations or changes in the size of the material. For instance, it can be used to scale particles near a boundary to represent a stretching or compression effect.</p></li><li><p><a href="autodocs.html#PeriDyn.ScaleFixWaitBC"><code>ScaleFixWaitBC</code></a> (Scale Fix Wait Boundary Condition): This boundary condition applies a scaling factor to particles after a specified number of time steps. It allows particles to be scaled or deformed over time. It can be useful for simulating time-dependent deformations. For example, it can be used to gradually apply a scaling effect to particles at the boundary after a certain waiting period.</p></li></ul><h2 id="Custom-boundary-conditions"><a class="docs-heading-anchor" href="#Custom-boundary-conditions">Custom boundary conditions</a><a id="Custom-boundary-conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-boundary-conditions" title="Permalink"></a></h2><p>A custom boundary condition can also be defined by the user which should be a subtype of <a href="autodocs.html#PeriDyn.BoundaryCondition"><code>BoundaryCondition</code></a> abstract type. These boundary conditions are applied to the position and velocity aspects of the particles in the simulation defined by <code>xF</code> and <code>vF</code> functions respectively. They define the behavior of the particles at the boundaries and can be customized based on the specific requirements of the simulation. <a href="autodocs.html#PeriDyn.apply_bc!-Union{Tuple{T}, Tuple{Any, T, Symbol}} where T&lt;:BoundaryCondition"><code>apply_bc!</code></a> and <a href="autodocs.html#PeriDyn.apply_bc_at0!-Union{Tuple{T}, Tuple{Any, T}} where T&lt;:BoundaryCondition"><code>apply_bc_at0!</code></a> functions are used to apply the boundary conditions to the particles in the simulation. The <a href="autodocs.html#PeriDyn.check!-Union{Tuple{T}, Tuple{Any, T}} where T&lt;:BoundaryCondition"><code>check!</code></a> function is used to check if the boundary conditions are applied correctly to the particles in the simulation. <a href="autodocs.html#PeriDyn.apply_bc!-Union{Tuple{T}, Tuple{Any, T, Symbol}} where T&lt;:BoundaryCondition"><code>apply_bc!</code></a>, <a href="autodocs.html#PeriDyn.apply_bc_at0!-Union{Tuple{T}, Tuple{Any, T}} where T&lt;:BoundaryCondition"><code>apply_bc_at0!</code></a> and <a href="autodocs.html#PeriDyn.check!-Union{Tuple{T}, Tuple{Any, T}} where T&lt;:BoundaryCondition"><code>check!</code></a> functions are defined for <a href="autodocs.html#PeriDyn.BoundaryCondition"><code>BoundaryCondition</code></a> abstract type and can be overloaded by the user to define custom boundary conditions. The default implementation of these functions is as follows.</p><pre><code class="language-julia hljs">&quot;&quot;&quot;
    apply_bc!(env, BC::BoundaryCondition, ::Type{Val{:position}})

Apply the general boundary condition `BC` to the position aspect
of the given environment `env`.

# Arguments
- `env`: The environment to which the boundary condition is applied.
- `BC`: The general boundary condition to apply.
&quot;&quot;&quot;
function apply_bc!(env, BC::T, ::Type{Val{:position}}) where
                                        T &lt;: BoundaryCondition
    a, b = BC.xF(env, BC)
    env.y[:, BC.bool] .= a
    BC.last .= b
end

&quot;&quot;&quot;
    apply_bc!(env, BC::BoundaryCondition, ::Type{Val{:velocity}})

Apply the general boundary condition `BC` to the velocity aspect of the
given environment `env`.

# Arguments
- `env`: The environment to which the boundary condition is applied.
- `BC`: The general boundary condition to apply.
&quot;&quot;&quot;
function apply_bc!(env, BC::T, ::Type{Val{:velocity}}) where
                                        T &lt;: BoundaryCondition
    a, b = BC.vF(env, BC)
    env.v[:, BC.bool] .= a
    BC.last .= b
end

&quot;&quot;&quot;
    apply_bc_at0!(env, BC::BoundaryCondition)

Apply the boundary condition `BC` to the given environment `env` at the
start of the simulation (t=0).
&quot;&quot;&quot;
function apply_bc_at0!(env, BC::T) where T &lt;: BoundaryCondition
    # error(&quot;check! method Not implemented for $(T)&quot;)
    log_detail(&quot;apply_bc_at0! method not implemented for $(T)&quot;)
end

&quot;&quot;&quot;
    check!(env, BC::BoundaryCondition)

Check if the boundary condition `BC` has changed and updates the `BC`.
Used for dynamic boundary conditions.
&quot;&quot;&quot;
function check!(env, BC::T) where T &lt;: BoundaryCondition
    # error(&quot;check! method Not implemented for $(T)&quot;)
    log_detail(&quot;check! method not implemented for $(T)&quot;)
end
</code></pre><p>The following code shows how one can define the <code>CustomNameBC</code> boundary condition.</p><pre><code class="language-julia hljs">&quot;&quot;&quot;
This module contains definitions for CustomNameBC boundary conditions.
&quot;&quot;&quot;

export CustomNameBC

&quot;&quot;&quot;
    CustomNameBC

Struct representing the CustomNameBC boundary condition.

# Fields
- `bool`: Boolean array specifying the affected elements.
- `last`: Last position of the affected elements.
- `onlyatstart`: Flag indicating if the boundary condition is applied
    only at the start.
- `xF`: function for updating the position.
- `vF`: function for updating the velocity.
&quot;&quot;&quot;
struct CustomNameBC &lt;: BoundaryCondition
    @general_bc_p
    # macro will expand to:
    # bool::AbstractArray{Bool, 1}
    # last::AbstractArray{Float64, 2}
    # onlyatstart::Bool
    # xF::Function
    # vF::Function
end


&quot;&quot;&quot;
    CustomNameBC(args...; onlyatstart=false)

Construct a CustomNameBC boundary condition.

# Arguments
- `args`: Arguments for the boundary condition.
- `onlyatstart`: Flag indicating if the boundary condition is applied only
    at the start (default: `false`).

# Returns
A CustomNameBC object representing the boundary condition.
&quot;&quot;&quot;
function CustomNameBC(args...; onlyatstart=false)
    last = zeros(Float64, SPATIAL_DIMENSIONS_REF[], sum(bool))
    bool = # generate bool array depending on the args passed
    xF = (env, BC) -&gt; begin
                        # write logic here
                        (a, b)  # return a and b as the new position
                                # and BC.last position
                    end
    vF = (env, BC) -&gt; begin
                        # write logic here
                        (a, b)  # return a and b as the new velocity
                                # and BC.last position
    deviceconvert(CustomNameBC(bool, last, onlyatstart, xF, vF))
end

&quot;&quot;&quot;
    apply_bc_at0!(env, BC::CustomNameBC)

Apply the CustomNameBC boundary condition at time 0 to the given
environment `env`.

# Arguments
- `env`: The environment to which the boundary condition is applied.
- `BC`: The CustomNameBC boundary condition to apply.
&quot;&quot;&quot;
function apply_bc_at0!(env, BC::CustomNameBC)
    # write logic here for e.g. BC.last .= env.y[:, BC.bool]
end

&quot;&quot;&quot;
    check!(env, BC::CustomNameBC)

Check if the CustomNameBC boundary condition has changed and updates
the `CustomNameBC`. Used for dynamic boundary conditions.

# Arguments
- `env`: The environment to which the boundary condition is applied.
- `BC`: The CustomNameBC boundary condition to apply.
&quot;&quot;&quot;
function check!(env, BC::CustomNameBC)
    # write logic here for e.g. BC.bool .= env.y[:, 1] .&gt; 0.5
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="cmodels.html">« Contact models</a><a class="docs-footer-nextpage" href="solvers.html">Solvers »</a><div class="flexbox-break"></div><p class="footer-message">Updated:  2024-09-06  19:24:20.870 </p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Friday 6 September 2024 19:24">Friday 6 September 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
